@startuml dfd-level-1
left to right direction
skinparam shadowing false
skinparam linetype ortho
skinparam nodesep 150
skinparam ranksep 240

rectangle "User" as User
rectangle "AI Vision\nService" as Vision
rectangle "Nutrition\nAPI" as NutAPI

rectangle "1.0\nAuth" as P1
rectangle "2.0\nProfile\nMgmt" as P2
rectangle "3.0\nMeal\nCapture" as P3

rectangle "4.0\nMeal\nAnalysis" as P4
rectangle "5.0\nNutrition\nCompute" as P5
rectangle "6.0\nReco\nEngine" as P6

circle "7.0\nMeal\nLogging" as P7

database "Users" as D1
database "Profiles" as D2
database "Meal\nLogs" as D3
database "Meal\nImages" as D4
database "Analysis\nResults" as D5

User --> P1
P1 --> D1
P1 --> User

User --> P2
P2 --> D2

User --> P3
P3 --> D4
P3 --> P4

P4 --> Vision
Vision --> P4
P4 --> P5

P5 --> NutAPI
NutAPI --> P5
P5 --> D5
P5 --> P6

P6 --> User
P6 --> P7
P7 --> D3
P7 --> User

@enduml
